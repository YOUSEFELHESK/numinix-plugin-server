syntax = 'proto3';

package lexmodo.v1.pages;

option go_package = "bitbucket.org/lexmodo/proto/pages";

import "google/protobuf/empty.proto";

service Pages {
    rpc CreatePages(PagesRequest) returns(ResultResponse){}
    rpc UpdatePages(PagesRequest) returns(ResultResponse){}
    rpc GetPage(PagesRequest) returns(ResultResponse){}
    rpc DeletePages(PagesRequest) returns(ResultResponse){}
    rpc GetPages(PageListingInfo) returns(ResultResponse){}
    rpc GetPageRules(google.protobuf.Empty) returns(ResultResponse){}
    rpc CreatePageRule(PagesRuleRequest) returns(ResultResponse){}
    rpc DeletePageRule(PagesRuleRequest) returns(ResultResponse){}
}


message RuleSortBy {

    string column_name =1;
    enum SORT{
        asc =0;
        desc=1;
    }
    SORT sort_order =2;
}

message PagesRuleRequest{
    string rule_id = 1;
    string rule_name = 2;
    string rule_query = 3;
    repeated RuleSortBy sort_by =4;
    uint64 sort_order =5;
    string pit =9;
} 

message PagesRequest {
    string page_id = 1;
    string page_seo_title =2;
    string page_seo_description =3;
    string page_seo_url =4;
    bool page_visible =5;
    uint64 visible_on =6;
    string page_title = 7;
    string page_contents =8;
    uint64 updated_on =9;
    uint64 created_on =10;
}

message PageListingInfo{

    string link_id = 1;
    uint32 display_result = 3;
    string rule_id = 4;
    repeated PagesRequest  pages =5;
    string rule_query = 6;
    repeated RuleSortBy sort_by =7;
    string pit =8;
    uint32 total_result = 9;
        
}

message ResultResponse {
    bool success = 1;
    bool failure = 2;
    string code = 3;
    string message = 4;
    PagesRequest page =5;
    PageListingInfo pages =6;
    repeated PagesRuleRequest rules =7;
}