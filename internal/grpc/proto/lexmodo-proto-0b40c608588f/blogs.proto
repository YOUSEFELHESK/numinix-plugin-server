syntax = 'proto3';

package lexmodo.v1.blog;

option go_package = "bitbucket.org/lexmodo/proto/blog";
import "google/protobuf/wrappers.proto";

service Blog {

  rpc AddComment(CommentsRequest) returns (ResultResponse) {} 
  rpc ApproveComment(CommentsRequest) returns (ResultResponse) {} 
  rpc DeleteComment(CommentsRequest) returns (ResultResponse) {} 
  rpc GetComment(CommentsRequest) returns (ResultResponse) {} 


  rpc AddBlog(BlogRequest) returns (ResultResponse) {} 
  rpc UpdateBlog(BlogRequest) returns (ResultResponse) {} 
  rpc DeleteBlog(BlogRequest) returns (ResultResponse) {} 
  rpc GetBlog(BlogRequest) returns (ResultResponse) {} 
  rpc BlogListing(BlogSearch) returns (ResultResponse) {} 

  rpc AddPosts(PostsRequest) returns (ResultResponse) {} 
  rpc GetPost(PostsRequest) returns (ResultResponse) {} 
  rpc PostsListing(PostSearch) returns (ResultResponse) {} 
  rpc UpdatePosts(PostsRequest) returns (ResultResponse) {} 
  rpc DeletePosts(PostsRequest) returns (ResultResponse) {} 

}


message BlogListing{


    uint32 display_result = 1;
    uint32 total_result= 2;
    repeated BlogRequest blogs =3;
  	repeated PostsRequest posts =4;
  	repeated CommentsRequest comments =5;
    string pit =6;

}


message ResultResponse{

    bool success = 1;
    bool failure = 2;
    string code = 3;
    string message = 4;
    BlogListing blog_listing = 5;
    BlogRequest blog =6;
    PostsRequest post =7;

}

message BlogSearch {
	string rule_query = 1;
	string pit = 2;
    uint64 display_result = 3;
    repeated RuleSortBy sort_by = 4;
}

message SearchFieldPosts{

}
message PostSearch {
	string rule_query = 1;
	string pit = 2;
    uint64 display_result = 3;
    repeated RuleSortBy sort_by = 4;

	
}
enum COMMENTABLE_TYPE{
    disabled = 0;
    approval = 1;
    publish = 2;
}

enum COMMENT_STATUS {
	default_comment = 0;
	pending_comment = 1;
	approved_comment =2;
	declined_comment = 3;
}



message RuleSortBy {

    string column_name =1;
    enum SORT{
        asc =0;
        desc=1;
    }
    SORT sort_order =2;
}


message BlogRequest{

	COMMENTABLE_TYPE commentable =1;
	uint64 created_at =2;
	string handle =3;
	string blog_id =4;
	repeated string tags =5;
	string blog_title =6;
	uint64 updated_at = 7;
	string blog_seo_url = 8;
	string blog_seo_title =9;
	string blog_seo_description  = 10;
	string blog_image_url = 11;
	bool blog_status =12;
	string blog_description = 13;	

}
message COMMENTS_STATS {
	uint64 total_comments = 1;
	uint64 total_approved = 2;
	uint64 total_declined = 3;
	uint64 total_pending = 4;
}

message PostsRequest{
	string posts_id = 1;
	string posts_summary_html =2;
	string handle =3;
	bool published = 4;
	uint64 published_at =5;
	string post_url = 6;
	string post_body = 7;
	string author =8;
	string blog_id = 9;
	uint64 created_on = 10;
	string posts_image_url = 11;
	COMMENTS_STATS comments_stats = 12;
	string posts_title =13;
	
}



message CommentsRequest {
	string comment_id = 1;
	string comment_body = 2;
	string author =3;
	string email =4;
	string ip_address =5;
	uint64 created_at = 6;
	uint64 updated_at = 7;
	uint64 published_at = 8;
	string post_id =9;
	COMMENT_STATUS comment_status =10;
	string blog_id = 11;
	string replied_to =12;
}